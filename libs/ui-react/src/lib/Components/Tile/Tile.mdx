import { Meta, Story, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as TileStories from './Tile.stories';
import { Tile } from './Tile';
import {
  CustomTabs,
  Tab,
  DoVsDontRow,
  DoBlockItem,
  DontBlockItem,
} from '../../../../.storybook/components';
import CommonRulesDoAndDont from '../../../../.storybook/components/DoVsDont/CommonRulesDoAndDont.mdx';

<Meta title='Containment/Tile' of={TileStories} />

# ðŸ“‹ Tile

<CustomTabs>
  <Tab label="Overview">

## Introduction

Tile components are compact, card-like interactive elements designed for horizontal lists, carousels, or grids. They use a flexible composite pattern that allows you to compose tiles with spots, text content, tags, and custom elements in a vertical layout.

> View in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=5783-1328).

## Anatomy

<Canvas of={TileStories.Base} />

- **TileSecondaryAction (optional)**: Action button in the top right corner, visible on hover
- **TileSpot**: Visual icon or element at the top
- **TileContent**: Container for title and description
  - **TileTitle**: The main label of the item (required)
  - **TileDescription (optional)**: Provides additional context
- **TileTrailingContent (optional)**: Container for trailing content like Tags, div, etc.

<Controls of={TileStories.Base} />

### Appearance

Two appearance variants are available:

- **no-background** (default): Transparent background with hover/pressed states
- **card**: Surface background color with hover/pressed states

Both can be combined with the disabled state.

<Canvas of={TileStories.AppearanceShowcase} />

### Variants Showcase

Tile components support various spot icons to categorize or visualize the content, including coin icons.

<Canvas of={TileStories.VariantsShowcase} />

### Custom spot size

The `TileSpot` component supports a `size` prop to customize the size of the spot.

<Canvas of={TileStories.SizeShowcase} />

### Horizontal Lists

Horizontal lists are used to display a list of tiles in a horizontal scrollable container.

<Canvas of={TileStories.HorizontalList} />

### Responsive layout

By default the tile fills the width of its container. The title and description will be truncated to one line.

<Canvas of={TileStories.ResponsiveLayout} />

### Centered Content

Use the `centered` prop to vertically center tile content. This is useful when a tile has less content than its neighbors, like a "Show more" tile in a grid.

<Canvas of={TileStories.CenteredShowcase} />

</Tab>
<Tab label="Implementation">

```bash
npm install @ledgerhq/lumen-ui-react @radix-ui/react-slot
```

> **Note**: `@ledgerhq/lumen-design-core` and other peer dependencies (`react`, `tailwindcss`, `clsx`, etc.) are required. See our [Setup Guide â†’](?path=/docs/getting-started-setup-tailwind--docs#1-tailwind-config) for complete installation and Tailwind configuration.

The `@radix-ui/react-slot` dependency enables flexible composition patterns for the Tile component.

## Basic Usage

```tsx
import {
  Tile,
  TileSpot,
  TileContent,
  TileTitle,
  TileDescription,
} from '@ledgerhq/lumen-ui-react';
import { Settings } from '@ledgerhq/lumen-ui-react/symbols';

function MyComponent() {
  return (
    <Tile appearance='no-background' onClick={() => console.log('Clicked!')}>
      <TileSpot appearance='icon' icon={Settings} />
      <TileContent>
        <TileTitle>Settings</TileTitle>
        <TileDescription>Manage preferences</TileDescription>
      </TileContent>
    </Tile>
  );
}
```

## Advanced Patterns

### With Secondary Action

```tsx
import {
  Tile,
  TileSecondaryAction,
  TileSpot,
  TileContent,
  TileTitle,
} from '@ledgerhq/lumen-ui-react';
import { Settings, MoreVertical } from '@ledgerhq/lumen-ui-react/symbols';

<Tile>
  <TileSecondaryAction
    icon={MoreVertical}
    onClick={(e) => console.log('More actions')}
  />
  <TileSpot appearance='icon' icon={Settings} />
  <TileContent>
    <TileTitle>Settings</TileTitle>
  </TileContent>
</Tile>;
```

### With Trailing Content (Tags, etc.)

```tsx
import {
  Tile,
  TileSpot,
  TileContent,
  TileTitle,
  TileDescription,
  TileTrailingContent,
  Tag,
} from '@ledgerhq/lumen-ui-react';
import { Bitcoin } from '@ledgerhq/lumen-ui-react/symbols';

<Tile appearance='card'>
  <TileSpot appearance='icon' icon={Bitcoin} />
  <TileContent>
    <TileTitle>Bitcoin</TileTitle>
    <TileDescription>BTC</TileDescription>
    <TileTrailingContent>
      <Tag label='Active' appearance='success' />
    </TileTrailingContent>
  </TileContent>
</Tile>;
```

### Disabled State

```tsx
<Tile disabled>
  <TileSpot appearance='icon' icon={Settings} />
  <TileContent>
    <TileTitle>Settings</TileTitle>
    <TileDescription>Unavailable</TileDescription>
  </TileContent>
</Tile>
```

### Centered Content

Use the `centered` prop to vertically center the tile content. This is useful when a tile has less content than its neighbors in a grid, like a "Show more" tile that needs to align with richer tiles.

```tsx
import { ChevronRight } from '@ledgerhq/lumen-ui-react/symbols';

// In a grid where other tiles have more content
<div className='grid grid-cols-4 gap-8'>
  <Tile appearance='card'>
    <TileSpot appearance='coin' icon='btc' />
    <TileContent>
      <TileTitle>Title</TileTitle>
      <TileDescription>Description</TileDescription>
      <TileTrailingContent>
        <Tag label='Label' />
      </TileTrailingContent>
    </TileContent>
  </Tile>

  {/* Show more tile with centered content */}
  <Tile appearance='card' centered>
    <TileSpot appearance='icon' icon={ChevronRight} />
    <TileContent>
      <TileTitle>Show more</TileTitle>
    </TileContent>
  </Tile>
</div>
```

### With Coin Icon

```tsx
import { Tile, TileSpot, TileContent, TileTitle } from '@ledgerhq/lumen-ui-react';

<Tile onClick={() => console.log('Clicked!')}>
  <TileSpot appearance='coin' icon='btc' />
  <TileContent>
    <TileTitle>Bitcoin</TileTitle>
    <TileDescription>BTC</TileDescription>
  </TileContent>
</Tile>;
```

### Horizontal List

```tsx
<div className='flex overflow-x-auto'>
  {items.map((item) => (
    <Tile key={item.id} className='w-128 shrink-0'>
      <TileSpot appearance='icon' icon={item.icon} />
      <TileContent>
        <TileTitle>{item.title}</TileTitle>
        <TileDescription>{item.description}</TileDescription>
      </TileContent>
    </Tile>
  ))}
</div>
```

### Virtual Lists

When rendering long lists or grids of Tiles, we recommend using [TanStack Virtual](https://tanstack.com/virtual/latest) for optimal performance. Virtual lists only render visible items, significantly improving performance with large datasets.

```tsx
import React from 'react';
import { useVirtualizer } from '@tanstack/react-virtual';
import {
  Tile,
  TileSpot,
  TileContent,
  TileTitle,
  TileDescription,
} from '@ledgerhq/lumen-ui-react';
import { Settings } from '@ledgerhq/lumen-ui-react/symbols';

function VirtualTileList({ items }) {
  const parentRef = React.useRef<HTMLDivElement>(null);

  const virtualizer = useVirtualizer({
    count: items.length,
    getScrollElement: () => parentRef.current,
    estimateSize: () => 120, // Approximate height of Tile
  });

  return (
    <div ref={parentRef} className='h-400 overflow-auto'>
      <div
        className='relative w-full'
        style={{ height: `${virtualizer.getTotalSize()}px` }}
      >
        {virtualizer.getVirtualItems().map((virtualItem) => (
          <div
            key={virtualItem.key}
            className='absolute left-0 top-0 w-full'
            style={{ transform: `translateY(${virtualItem.start}px)` }}
          >
            <Tile>
              <TileSpot appearance='icon' icon={Settings} />
              <TileContent>
                <TileTitle>{items[virtualItem.index].title}</TileTitle>
                <TileDescription>
                  {items[virtualItem.index].description}
                </TileDescription>
              </TileContent>
            </Tile>
          </div>
        ))}
      </div>
    </div>
  );
}
```

> ðŸ“¦ Install with `npm install @tanstack/react-virtual`. See the [TanStack Virtual documentation](https://tanstack.com/virtual/latest/docs/introduction) for more details.

## Do's and Don'ts

<div className='flex flex-col gap-24'>

### Trailing Content

<DoVsDontRow>
  <DoBlockItem
    title='Use TileTrailingContent for additional elements'
    description='Wrap Tags, labels, or supplementary content inside TileTrailingContent within TileContent for proper 4px spacing.'
  >

```tsx
{/* prettier-ignore */}
<Tile>
  <TileSpot appearance="icon" icon={Settings} />
  <TileContent>
    <TileTitle>Title</TileTitle>
    <TileDescription>Description</TileDescription>
    <TileTrailingContent>
      <Tag label="Active" />
    </TileTrailingContent>
  </TileContent>
</Tile>
```

  </DoBlockItem>
  <DontBlockItem
    title="Don't place trailing content directly in TileContent"
    description='Placing Tags or other elements directly in TileContent without TileTrailingContent results in incorrect spacing.'
  >

```tsx
{/* prettier-ignore */}
<Tile>
  <TileSpot appearance="icon" icon={Settings} />
  <TileContent>
    <TileTitle>Title</TileTitle>
    <TileDescription>Description</TileDescription>
    <Tag label="Active" />
  </TileContent>
</Tile>
```

  </DontBlockItem>
</DoVsDontRow>

<CommonRulesDoAndDont />

</div>

</Tab>
</CustomTabs>
