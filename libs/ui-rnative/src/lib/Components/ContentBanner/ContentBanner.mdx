import { Meta, Story, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as ContentBannerStories from './ContentBanner.stories';
import {
  ContentBanner,
  ContentBannerContent,
  ContentBannerTitle,
  ContentBannerDescription,
} from './ContentBanner';
import { Box } from '../Utility';
import { CustomTabs, Tab } from '../../../../.storybook/components';
import { DoVsDontRow, DoBlockItem, DontBlockItem } from '../../../../.storybook/components/DoVsDont';
import CommonRulesDoAndDont from '../../../../.storybook/components/DoVsDont/CommonRulesDoAndDont.mdx';

<Meta title='Components/ContentBanner' of={ContentBannerStories} />

# ContentBanner

<CustomTabs>
  <Tab label="Overview">

## Introduction

ContentBanner is a composable banner component used to display contextual information with an optional leading visual, title, description, and close button. It follows a composite component pattern for maximum flexibility.

> View in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=11235-5966).

## Anatomy

<Canvas of={ContentBannerStories.Base} />

- **ContentBanner**: Root container with surface background and rounded corners
- **Leading element**: Any visual element (Spot, Icon, Avatar) passed as a direct child
- **ContentBannerContent**: Container for title and description
- **ContentBannerTitle**: The main label of the banner (clamps at 2 lines)
- **ContentBannerDescription**: Provides additional context below the title (clamps at 2 lines)
- **Close button**: Optional InteractiveIcon, rendered via the `onClose` prop (positioned absolute top-right)

## Properties

### Overview

<Canvas of={ContentBannerStories.Base} />
<Controls of={ContentBannerStories.Base} />

### Content Variations

ContentBanners follow a composite component pattern that allows flexible content composition.

<Canvas of={ContentBannerStories.ContentVariationsShowcase} />

### Dismissible

When `onClose` is provided, a close button (InteractiveIcon) is rendered in the top-right corner of the banner.

<Canvas of={ContentBannerStories.WithClose} />

## Responsive Layout

ContentBanner adapts to its container width. Title and description clamp at two lines when content overflows.

<Canvas of={ContentBannerStories.ResponsiveLayout} />

> **Key behaviors:**
>
> - Automatically fits container width
> - Title clamps to two lines
> - Description clamps to two lines
> - Leading visual and close button maintain fixed sizes

## Accessibility

- The close button includes an `accessibilityLabel` (customizable via `closeAriaLabel` prop or auto-translated)
- The close button uses `InteractiveIcon` with proper press states
- All sub-components forward refs and spread View props for accessibility support

</Tab>
<Tab label="Implementation">

## Setup

Install and set up the library with our [Setup Guide â†’](?path=/docs/getting-started-setup--docs).

## Basic Usage

The ContentBanner uses a composite component pattern for maximum flexibility:

```tsx
import {
  ContentBanner,
  ContentBannerContent,
  ContentBannerTitle,
  ContentBannerDescription,
  Spot,
} from '@ledgerhq/lumen-ui-rnative';
import { Settings } from '@ledgerhq/lumen-ui-rnative/symbols';

function MyComponent() {
  return (
    <ContentBanner>
      <Spot appearance='icon' icon={Settings} size={48} />
      <ContentBannerContent>
        <ContentBannerTitle>Title</ContentBannerTitle>
        <ContentBannerDescription>
          Description text for the content banner.
        </ContentBannerDescription>
      </ContentBannerContent>
    </ContentBanner>
  );
}
```

### With Close Button

Add an `onClose` callback to render a dismissible close button in the top-right corner:

```tsx
import {
  ContentBanner,
  ContentBannerContent,
  ContentBannerTitle,
  ContentBannerDescription,
  Spot,
} from '@ledgerhq/lumen-ui-rnative';
import { Wallet } from '@ledgerhq/lumen-ui-rnative/symbols';

function MyComponent() {
  return (
    <ContentBanner
      onClose={() => console.log('Closed')}
      closeAriaLabel='Close banner'
    >
      <Spot appearance='icon' icon={Wallet} size={48} />
      <ContentBannerContent>
        <ContentBannerTitle>Dismissible Banner</ContentBannerTitle>
        <ContentBannerDescription>
          Press the close button to dismiss.
        </ContentBannerDescription>
      </ContentBannerContent>
    </ContentBanner>
  );
}
```

### Without Leading Visual

The leading visual is optional. You can use ContentBanner with just title and description:

```tsx
import {
  ContentBanner,
  ContentBannerContent,
  ContentBannerTitle,
  ContentBannerDescription,
} from '@ledgerhq/lumen-ui-rnative';

function MyComponent() {
  return (
    <ContentBanner onClose={() => console.log('Closed')}>
      <ContentBannerContent>
        <ContentBannerTitle>No Icon</ContentBannerTitle>
        <ContentBannerDescription>
          A content banner without a leading visual element.
        </ContentBannerDescription>
      </ContentBannerContent>
    </ContentBanner>
  );
}
```

### Title Only

Description is optional:

```tsx
import {
  ContentBanner,
  ContentBannerContent,
  ContentBannerTitle,
  Spot,
} from '@ledgerhq/lumen-ui-rnative';
import { Settings } from '@ledgerhq/lumen-ui-rnative/symbols';

function MyComponent() {
  return (
    <ContentBanner>
      <Spot appearance='icon' icon={Settings} size={48} />
      <ContentBannerContent>
        <ContentBannerTitle>Title Only</ContentBannerTitle>
      </ContentBannerContent>
    </ContentBanner>
  );
}
```

### Layout Adjustments with lx

Use the `lx` prop for layout adjustments like margins or positioning:

```tsx
<ContentBanner lx={{ marginTop: 's16', marginBottom: 's8' }}>
  <Spot appearance='icon' icon={Settings} size={48} />
  <ContentBannerContent>
    <ContentBannerTitle>With Margin</ContentBannerTitle>
    <ContentBannerDescription>
      This banner has layout adjustments via lx.
    </ContentBannerDescription>
  </ContentBannerContent>
</ContentBanner>
```

## Do's and Don'ts

The following guidelines ensure consistent usage of the ContentBanner component and maintain design system principles.

<Box lx={{ flexDirection: 'column', gap: 's16' }}>

  <DoVsDontRow>
    <DoBlockItem
      title='Use the composite pattern correctly'
      description='ContentBannerTitle and ContentBannerDescription should be nested inside ContentBannerContent'
    >

{/* prettier-ignore */}
```tsx
<ContentBanner>
  <Spot appearance='icon' icon={Settings} size={48} />
  <ContentBannerContent>
    <ContentBannerTitle>Title</ContentBannerTitle>
    <ContentBannerDescription>Description</ContentBannerDescription>
  </ContentBannerContent>
</ContentBanner>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't place title and description outside ContentBannerContent"
      description='Title and description must be inside ContentBannerContent for proper vertical stacking'
    >

{/* prettier-ignore */}
```tsx
// DON'T - Title and description outside ContentBannerContent
<ContentBanner>
  <Spot appearance='icon' icon={Settings} size={48} />
  <ContentBannerTitle>Title</ContentBannerTitle>
  <ContentBannerDescription>Description</ContentBannerDescription>
</ContentBanner>
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Place leading visual as a direct child of ContentBanner'
      description='The leading element (Spot, Icon, Avatar) should be a direct child of the root, alongside ContentBannerContent'
    >

{/* prettier-ignore */}
```tsx
<ContentBanner>
  <Spot appearance='icon' icon={Settings} size={48} />
  <ContentBannerContent>
    <ContentBannerTitle>Title</ContentBannerTitle>
  </ContentBannerContent>
</ContentBanner>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't nest the leading visual inside ContentBannerContent"
      description='The leading element should be a sibling of ContentBannerContent, not nested inside it'
    >

{/* prettier-ignore */}
```tsx
// DON'T - Spot inside ContentBannerContent
<ContentBanner>
  <ContentBannerContent>
    <Spot appearance='icon' icon={Settings} size={48} />
    <ContentBannerTitle>Title</ContentBannerTitle>
  </ContentBannerContent>
</ContentBanner>
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Use onClose prop for dismissible banners'
      description='The close button is handled by the root component via the onClose prop'
    >

{/* prettier-ignore */}
```tsx
<ContentBanner onClose={() => handleClose()}>
  <Spot appearance='icon' icon={Settings} size={48} />
  <ContentBannerContent>
    <ContentBannerTitle>Dismissible</ContentBannerTitle>
  </ContentBannerContent>
</ContentBanner>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't add a custom close button inside the banner"
      description='Use the built-in onClose prop instead of adding your own close button'
    >

{/* prettier-ignore */}
```tsx
// DON'T - Custom close button
<ContentBanner>
  <Spot appearance='icon' icon={Settings} size={48} />
  <ContentBannerContent>
    <ContentBannerTitle>Dismissible</ContentBannerTitle>
  </ContentBannerContent>
  <InteractiveIcon iconType='filled' onPress={handleClose}>
    <Close size={16} />
  </InteractiveIcon>
</ContentBanner>
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Use lx for layout adjustments only'
      description='Use the lx prop for margins, positioning, and other layout adjustments'
    >

{/* prettier-ignore */}
```tsx
<ContentBanner lx={{ marginTop: 's16' }}>
  <Spot appearance='icon' icon={Settings} size={48} />
  <ContentBannerContent>
    <ContentBannerTitle>Title</ContentBannerTitle>
  </ContentBannerContent>
</ContentBanner>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't use lx for appearance changes"
      description='Avoid using lx to modify colors, padding, or other core appearance styles'
    >

{/* prettier-ignore */}
```tsx
<ContentBanner lx={{ backgroundColor: 'accent', padding: 's24' }}>
  <Spot appearance='icon' icon={Settings} size={48} />
  <ContentBannerContent>
    <ContentBannerTitle>Title</ContentBannerTitle>
  </ContentBannerContent>
</ContentBanner>
```

    </DontBlockItem>

  </DoVsDontRow>

  <CommonRulesDoAndDont />
</Box>

</Tab>
</CustomTabs>
